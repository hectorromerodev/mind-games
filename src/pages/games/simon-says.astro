---
import BaseGame from '../../components/game/BaseGame.astro';
import GameControls from '../../components/game/GameControls.astro';
import GameInstructions from '../../components/game/GameInstructions.astro';

const instructionSections = [
  {
    title: 'How to Play',
    icon: 'ðŸŽ¯',
    color: 'blue' as const,
    items: [
      'Watch as cells light up in sequence',
      'Repeat the sequence by clicking the cells in order',
      'Each round adds one more cell to the sequence',
      'Complete the sequence correctly to advance'
    ]
  },
  {
    title: 'Skills Developed',
    icon: 'ðŸ§ ',
    color: 'purple' as const,
    items: [
      'Working memory',
      'Attention and focus',
      'Pattern recognition',
      'Visual-spatial processing'
    ]
  },
  {
    title: 'Strategy Tips',
    icon: 'âš¡',
    color: 'orange' as const,
    items: [
      'Focus intently during the sequence display',
      'Try to create patterns or groups in your mind',
      'Practice regularly to improve memory span',
      'Stay calm and don\'t rush your clicks'
    ]
  },
  {
    title: 'Scoring',
    icon: 'ðŸ“Š',
    color: 'green' as const,
    items: [
      'Round completion: Base points per round',
      'Streak bonus: Extra points for consecutive rounds',
      'Progression bonus: Higher rounds = more points',
      'Performance rating: Based on rounds completed'
    ]
  }
];
---

<BaseGame 
  gameTitle="Simon Says"
  gameIcon="ðŸŸ¢"
  description="Watch the sequence, then repeat it back!"
  maxTime={90}
  showStats={true}
  showInstructions={true}
>
  <!-- Instructions Content -->
  <div slot="instructions-content">
    <GameInstructions sections={instructionSections} />
  </div>

  <!-- Game Grid -->
  <div slot="game-content">
    <div id="gameGrid" class="flex justify-center items-center pb-8 transition-all duration-300">
      <!-- Grid will be generated dynamically by the game class -->
    </div>
  </div>

  <!-- Game Controls -->
  <div slot="game-controls">
    <GameControls showReset={true} showPause={false} />
  </div>
</BaseGame>

<script>
  import { SimonSaysGame } from '../../utils/SimonSaysGameClass.js';

  // Initialize the game when the page loads
  document.addEventListener('DOMContentLoaded', () => {
    new SimonSaysGame();
  });
</script>

<style>
  /* Game-specific styles */
  .game-cell {
    transition: all 0.2s ease-in-out;
  }
  
  .game-cell:hover {
    transform: scale(1.05);
    box-shadow: 0 0 20px rgba(147, 51, 234, 0.5);
  }
  
  .game-cell.active {
    animation: cellPulse 0.6s ease-in-out;
  }
  
  @keyframes cellPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); box-shadow: 0 0 30px rgba(147, 51, 234, 0.8); }
    100% { transform: scale(1); }
  }
  
  /* Transition classes */
  .fade-out {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
    transition: all 0.5s ease-in-out;
  }
  
  .fade-in {
    opacity: 1;
    transform: translateY(0) scale(1);
    transition: all 0.7s ease-in-out;
  }
</style>
